---
{"dg-publish":true,"dg-正则表达式":true,"permalink":"/home/正则表达式/","dgPassFrontmatter":true}
---


# 一、初始SQL注入

	sql 注入：

   把用户输入的数据被当做数据库代码进行执行

数据库代码 => mysql 代码 select SQL语句

渗透测试 的命脉就是传参

## 什么是注入

	注入攻击的本质，是把用户输入的数据当作代码执行。

这里有两个关键条件：

第一是用户能够控制输入
第二个是原本程序要执行的代码，拼接了用户输入的数据然后进行执行

那什么是SQL注入，就是针对sql语句的注入，也可以理解为用户输入的数据当做SQL语句的代码执行了 SQL注入是1998年一名叫做如rfp的黑客发表的一篇文章所进入大众视线的

如何防护？现在常用的防护软件主流核心就是

通过正则来过滤传参

过滤 => 把脏的东西过滤掉(规则)

   计算机中的过滤是人设定的规则
   
a' Or 1 = 1 --qwe  123
'  Or 1=1  --qwe 

```php
$email = 'yuxiaoxiao@example.com';
$domain = strstr($email,'@');
echo $domain; //打印@example.com
$user=strstr($email,'@',true);//从PHP5.3.0起
echo $user; //打印 yuxiaoxio
```
如果字符串最后为0 ，可以用strlen 显示出来。
案例
```php  
<?php 
$a = strstr('yuxiaoxiao@example.com0','0');
var_dump($a);
if(strlen($a)){echo 'ok';}
//判断字符串的长度，就不会受到0干扰
?> 
```


# 二、什么是正则表达式

🍆正则表达式，又称规则表达式。计算机科学的一个概念。正则表达式通常被用来检索、替换哪些符号某个模式(规则)的文本。

## 🍇正则表达式的特点是：
- 1.灵活性、逻辑性和功能性非常强；
- 2.可以迅速地用级简单的方式达到字符串的复杂控制。
- 3.对于刚接触的人来说，比较晦涩难懂。

🍆正则表达式用途：

- 判断字符串是否符合某一规则 （判断是否符号手机号、邮箱规则）。
- 从一个字符串找到符合规则的所有字符串(取HTML标签名)。



# 三、PHP中正则表达式常用函数

🍇PHP 中使用正则一定要加代表正则的标识  // 

🥑preg_match_all(正则表达式,匹配字符串,匹配到的东西放到数组)
 🥑 返回匹配到的次数

🌶️preg_replace (正则表达式,替换成什么,匹配字符串)
 🌶️返回替换后的结果


替换支持数组格式

# 四、正则表达式语法- 字符

## 常用转义字符：

```
- 数字：\d
- 非数字：\D
- 空白字符（空格、制表符、换页符等）： \s
- 非空白字符： \S
- 单词字符：（26个英文字母+数字+下划线_）: \w
- 非单词字符： \W


```

## 自定义字符结合

- 字符集合：[单个字符或字符区间]，用于匹配集合内字符

如：
 - [a-z]表示a-z这26个小写字母
 - [0-9a-z]表示0-9 这10个数字和a-z26个小写字母
 - [135a-h] 表示包含数字1，3，5和字母a-h这8个字母
 - 注意：两个不同字符段间请勿使用，隔开。
- 非集：[^单个字符或字符区间]，用于匹配非集合内字符。
	如：
-  【^0-9】示匹配所有非数字字符。
-  【^a-zA-z】表示匹配所有非字母字符。

计算机的本质是数字运算  大小写是有说法

2>1    10>5

ascii码： 将字符串变化为数字

##  正则表达式的语法 - 关键字

`（）=> 和数字一样很像，代表这是一个整体。

`^ => 匹配输入字符串的开始位置

`$ =>匹配输入字符串的结尾位置

`. => 通配符[代表任意字符]  [不匹配换行]

`* =>  匹配0次或者多次

`+  => 匹配1次或者多次

`\  => 转义字符

`|  => 两项之间的一个选择。

【^b-y】除了b-y的一切 （中口号里面的是取反）
【a-z】匹配a-z的一切

（）代表是一个整体 

`^ 匹配字符串的开头

`$  匹配结尾

`. 匹配一切  nf .09
```php
$a ='zkaq123123';
var_dump(preg_match_all('/(zkaq.+)|(bbs.+)/',$a,$b));
var_dump($b);

```

`* 匹配0次或者多次 

`+ 匹配1次或者多次   
 [[学习区(未掌握)/是连续的字符\|是连续的字符]]




[[学习区(未掌握)/限定开头，限定结尾就是字符长度\|限定开头，限定结尾就是字符长度]]

4*(5+3) = 4*8 =32 


## 正则表达式的语法 - 限定符 + 修饰符

限定符：{}

{n} => 例如：o{8} 意思是指只有连起来8个0才会被匹配

{n,} => 例如： o{2,} 意思是只要2个0及其以上的就会被匹配

{n,m} => 例如： o{2,4} 意思是最少匹配2个0，最多匹配4个0

注：被匹配时，默认匹配最多的次数
```php
$a ='9999';
var_dump(preg_match_all('/9{2,3}/',$a,$b));
var_dump($b);
//结果是
int(1) array(1) { [0]=> array(1) { [0]=> string(3) "999" } }
```

修饰符：

/i  => 不区分大小写
/A  => 匹配规则必须从头开始匹配
/s  => .将匹配一切字符
/x  => 正则表达式的空白字符会被忽略

[正则表达式案例](https://www.cnblogs.com/-run/articles/2371078.html)

练习 
```php
<?php    
$key='flag{********************************}'; 
$Regular= preg_match("/zkaq.*key.2,9}:\/.*\/(key*key)/i", trim($_GET["id"]), $match);   
if( $Regular ){    
  die('key: '.$key);   
}
```

分析 die是输出意思

代码if die 
要执行到die这里

结果

`preg_match("/zkaq.*key.{2,9}:\/.*\/(key*key)/i", trim($_GET["id"]), $match)

[[学习区(未掌握)/preg_match#^ba8839\|preg_match#^ba8839]]的语法意思是(匹配规则,匹配字符串,匹配返回的数组)







